{
    "name": "cluster_config",
    "version": "2",
    "debug": 0,
    "memlim_key": "freeze3",
    "cluster_types": {
        "AWS_Batch": {
            "aws_region": "us-west-2",
            "pipeline_path": "/projects/topmed/dev_code/analysis_pipeline",
            "queue": "OD_opt_queue",
            "maxperf": "1",
            "job_parameters": {
                "wd": "",
                "dr": "/projects",
                "db": "1",
                "lf": "",
                "tmo": "60",
                "mt": "mount -t nfs4 -o vers=4.1 fs-6ccd31c5.efs.us-west-2.amazonaws.com:/ /projects",
                "at": "0"
            },
            "submit_opts": {
                "jobdef": "TM_nomount",
                "vcpus":  1,
                "memory": 5000,
                "region": "us-west-2",
                "dependsOn": [],
                "env": [ {"name": "R_LIBS_USER", "value": "/projects/resources/gactools/R_packages/library"} ],
                "command": []
            },
            "memory_limits": [
                { "freeze3": {
                    "find_unrelated":3500,
                    "ld_pruning":11000,
                    "combine_variants":1000,
                    "ibd_king":8000,
                    "kinship_plots":32000,
                    "pca_byrel":4000,
                    "pca_plots":1000,
                    "pca_corr":7000,
                    "pca_corr_plots":32000,
                    "pcrelate":8000,
                    "null_model":32000,
                    "aggregate_list":6000,
                    "assoc_single":24000,
                    "assoc_aggregate":24000,
                    "assoc_window":17000,
                    "assoc_combine":2000,
                    "assoc_plots":13000,
                    "grm":8000,
                    "grm_combine":10000,
                    "vcf2gds":16000,
                    "merge_gds":16000,
                    "unique_variant_ids":16000
                    }
                },
                { "freeze5": {
                    "find_unrelated":3500,
                    "ld_pruning":11000,
                    "combine_variants":1000,
                    "ibd_king":8000,
                    "kinship_plots":32000,
                    "pca_byrel":4000,
                    "pca_plots":1000,
                    "pca_corr":7000,
                    "pca_corr_plots":32000,
                    "pcrelate":8000,
                    "null_model":36000,
                    "aggregate_list":6000,
                    "assoc_single":24000,
                    "assoc_aggregate":24000,
                    "assoc_window":17000,
                    "assoc_combine":10000,
                    "assoc_plots":13000,
                    "grm":20000,
                    "grm_combine":12000,
                    "cleanup":12000,
                    "vcf2gds":16000,
                    "merge_gds":16000,
                    "unique_variant_ids":16000
                    }
                }
            ],
            "retryStrategy": {
                "attempts": 2
            },
            "sync_job": {
                "parameters": {
                    "msg": "Dependent jobs completed\n",
                    "jids": ""
                },
                "submit_opts": {
                    "jobdef": "TM_sync",
                    "dependsOn": []
                }
            },
            "run_cmd": {
                "cmd": "docker run --privileged uwgac/r343-topmed:devel /usr/local/analysis_pipeline/batchJob.py",
                "params": {
                    "--rdriver": "",
                    "--rargs": "",
                    "--workdir": "",
                    "--dataroot": "/projects",
                    "--Debug": "1",
                    "--mount": "\"mount -t nfs4 -o vers=4.1 fs-6ccd31c5.efs.us-west-2.amazonaws.com:/ /projects\""
                }
            }
        },
        "UW_Cluster": {
            "submit_cmd": "qsub",
            "submit_opts": {
                "-cwd":"",
                "-N":"",
                "-j":"y",
                "-q":"olga.q",
                "-S":"/bin/bash",
                "-terse":"",
                "-v":"R_LIBS=/projects/resources/gactools/R_packages/library,PATH=/projects/resources/software/apps/bin:$PATH"
            },
            "parallel_env": "local",
            "memory_limits": [

            ]
        },
        "AWS_Cluster": {
            "submit_cmd": "qsub",
            "submit_opts": {
                "-cwd":"",
                "-N":"",
                "-j":"y",
                "-q":"all.q",
                "-S":"/bin/bash",
                "-terse":"",
                "-v":"R_LIBS=/projects/resources/gactools/R_packages/library,PATH=/projects/resources/software/apps/bin:$PATH"
            },
            "parallel_env": "local",
            "memory_limits": [
                { "freeze3": {
                    "find_unrelated":3500,
                    "ld_pruning":11000,
                    "combine_variants":1000,
                    "pca_byrel":4000,
                    "pca_plots":1000,
                    "pca_corr":7000,
                    "pca_corr_plots":32000,
                    "pcrelate":8000,
                    "null_model":36000,
                    "aggregate_list":6000,
                    "assoc_single":24000,
                    "assoc_aggregate":24000,
                    "assoc_window":24000,
                    "assoc_combine":6000,
                    "assoc_plots":4000
                    }
                },
                { "freeze5": {
                    "find_unrelated":3500,
                    "ld_pruning":11000,
                    "combine_variants":1000,
                    "pca_byrel":4000,
                    "pca_plots":1000,
                    "pca_corr":7000,
                    "pca_corr_plots":32000,
                    "pcrelate":8000,
                    "null_model":36000,
                    "aggregate_list":6000,
                    "assoc_single":24000,
                    "assoc_aggregate":24000,
                    "assoc_window":17000,
                    "assoc_combine":2000,
                    "assoc_plots":13000
                    }
                }
            ]
        }
    }
}
